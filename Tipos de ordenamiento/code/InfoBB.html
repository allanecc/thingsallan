<!DOCTYPE html>
<html>
<head>
    <title>Algoritmos de Ordenamiento</title>
    <meta charset="UTF-8">
    </head>
<body  >
    <div  id="info">
        <h2>Clasificacion por Burbuja</h2>
        <div id="rr">
            <p class="text">Tal vez uno de los métodos de clasificación m ás simples que pueda haber es un algoritmo
                llamado «clasificación de burbuja» (bubblesort). La idea básica de la clasificación
                de burbuja es imaginar que los registros a ordenar están almacenados en
                un arreglo vertical. Los registros con claves menores son «ligeros» y suben. Se recorre
                varias veces el arreglo de abajo hacia arriba, y al hacer esto, si hay dos elementos
                adyacentes que no están en orden, esto es, si el «más ligero» está abajo, se invierten.
                El efecto producido por esta operación es que en el primer recorrido, el registro
                «más ligero» de todos, es decir, el registro que posee la clave con menor valor,
                sube hasta la superficie (o parte superior del arreglo). En el segundo Recorrido, la
                segunda clave menor sube hasta la segunda posición, y así sucesivamente. En este
                recorrido no es necesario subir hasta la posición uno, porque ya se sabe que la clave
                menor se encuentra ahí. En general, elrqcprrido / no intentp pasar más allá de la posición
                i. Se presenta el esbozo del algoritmo en la figura 8. í, con el supuesto de que
                el arreglo A es un array[l../i] of tipo_registro, y n es el número de registros. Aquí y
                en el resto del capítulo se supondrá que un campo llamado clave contiene el valor
                de la clave de cada registro.
        </div>
        <input id="bb" name="iniciar"class="btn btn-primary" type="button" value="Iniciar">
    </div>
    <div >
        <canvas id="demoCanvas" width="1000" height="700"></canvas>
    </div>
    <script>
        $("#info input[name='iniciar']").click(function(event) {$("#rr").remove();
                                                                $("#bb").remove();
                                                                ineit();});
        var stage = new createjs.Stage("demoCanvas");
        var circle;
        var text;
        var numtxt;
        var txti;
        var txtj;
        var figuras=[];
        var datos = [];
        var Estados =[];
        
        function ineit() {
            var x = 72;
            var y = 300;
            datos.push("Pelee");
            datos.push("Etna");
            datos.push("Krakatoa");
            datos.push("Augung");
            datos.push("Vesubio");
            datos.push("Santa Elena");
            
            txti = new createjs.Text("i=1", "40px Arial", "#983545");
            txtj = new createjs.Text("j=1", "40px Arial", "#983545");
            txti.textBaseline = "alphabetic";
            txtj.textBaseline = "alphabetic";
            txti.x = 100;
            txti.y = 500;
            txtj.x = 400;
            txtj.y = 500;
            stage.addChild(txti, txtj);
            for(i=0; i<6; i++){
                circle = new createjs.Shape();
                circle.graphics.beginFill("DeepSkyBlue").drawCircle(0, 0, 70);
                text = new createjs.Text(datos[i], "20px Arial", "#ffffff");
                numtxt = new createjs.Text(i+1, "40px Arial", "#983545");
                circle.x = x;
                circle.y = y;
                text.x = circle.x-60;
                text.y = circle.y;
                numtxt.x = circle.x;
                numtxt.y = circle.y-100;
                text.textBaseline = "alphabetic";
                numtxt.textBaseline = "alphabetic";
                figuras.push({circle,text});
                stage.addChild(figuras[i].text, numtxt);
                stage.addChildAt(figuras[i].circle,0);
                
                x+=150;
            }
            stage.update();
            sort();
        }
        
        function sort(){
            var n = datos.length;
            var temp ;
            var tempf;
            
            for(var i=0; i<n; i++){
                Estados.push(function (i) {return function () {
                    $("#code").load("/code/origBBS.html");
                    txti.text ="i = "+ (i+1);
                }}(i));
                for(var j = n-1; j>i; j--){
                    Estados.push(function (j) {return function () {
                    $("#code").load("/code/if.html");
                        txtj.text ="j = "+ (j+1);
                }}(j));
                    Estados.push( function (j) {return function () {
                        if(datos[j].charCodeAt(0) < datos[j-1].charCodeAt(0) ){
                            $("#code").load("/code/bbintercambia.html");
                            createjs.Tween.get(figuras[j].circle, {loop: false}, null, false)
                                .to({x: figuras[j-1].circle.x, y: figuras[j-1].circle.y, alpha: 1}, 1000, createjs.Ease.get(1)).wait(500);
                            createjs.Tween.get(figuras[j].text, {loop: false}, null, false)
                                .to({x: figuras[j-1].circle.x-60, y: figuras[j-1].circle.y, alpha: 1}, 1000, createjs.Ease.get(1)).wait(500);
                            createjs.Tween.get(figuras[j-1].circle, {loop: false}, null, false)
                                .to({x: figuras[j].circle.x, y: figuras[j].circle.y, alpha: 1}, 1000, createjs.Ease.get(1)).wait(500);
                            createjs.Tween.get(figuras[j-1].text, {loop: false}, null, false)
                                .to({x: figuras[j].circle.x-60, y: figuras[j].circle.y, alpha: 1}, 1000, createjs.Ease.get(1)).wait(500);
                            createjs.Ticker.addEventListener("tick", stage);
                            temp = datos[j];
                            tempf = figuras[j];
                            datos[j] = datos[j-1];
                            datos[j-1] =temp;
                            figuras[j] = figuras[j-1];
                            figuras[j-1] = tempf;
                        }else{
                            $("#code").load("/code/bbciclo2.html");
                        }
                        
                    }}(j));
                    
            }
            }
            iniciar();
        }
        
        function iniciar(){
            if(Estados.length > 0){
                setTimeout(function () {
                    Estados.shift().apply();
                    iniciar();
                }, 500);
            }
        }
    </script>
    </body>
</html>
